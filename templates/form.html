<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>NO LOVE NO LIFE</title>
    <link href="static/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header> 
        <h1>NO LOVE NO LIFE</h1>
    </header>
    <div class="b">
        <h2>Popuni formu i pronadji svoju srodnu dusu!</h2>
        <h3>XOXOXOXO</h3>
    </div>
    <main class="main2">
        <form id="userForm">
            <!-- Forma sa svim poljima kao pre -->
            <label for="ime" class="myLabelStyle">Ime:</label></br>
            <input type="text" id="ime" name="ime" required Class="styled-textbox"><br><br>
            <label for="prezime" class="myLabelStyle">Prezime:</label></br>
            <input type="text" id="prezime" name="prezime" required Class="styled-textbox"><br><br>
            <label for="pol" class="myLabelStyle">Pol:</label></br>
            <select id="pol" name="pol" required class="myDropDownStyle">
                <option value="" disabled selected>Izaberi</option>
                <option value="Muski">Muski</option>
                <option value="Zenski">Zenski</option>
            </select><br><br>
            <label for="zeljenipol" class="myLabelStyle">Pol interesa:</label></br>
            <select id="zeljenipol" name="zeljenipol" required class="myDropDownStyle">
                <option value="" disabled selected>Izaberi</option>
                <option value="Muski">Muski</option>
                <option value="Zenski">Zenski</option>
            </select><br><br>

            <!-- Ostatak forme ostaje isti -->
            <button type="submit" class="gumb">Submit</button>
        </form>

        <div id="response"></div> <!-- Ovdje se ne prikazuje više lista -->

    </main>

    <footer>
        <p class="a"> Napravljeno s ljubavlju za NLNL &#169; 2025 </p>
    </footer>

<script>
    document.getElementById("userForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Sprečava da se forma pošalje na default način
    
        // Uzmi vrednosti iz forme
        const ime = document.getElementById("ime").value;
        const prezime = document.getElementById("prezime").value;
        const pol = document.getElementById("pol").value;
        const zeljenipol = document.getElementById("zeljenipol").value;
        const tiplicnosti = document.getElementById("tiplicnosti").value;
        const roleModel = document.getElementById("roleModel").value;
        const zivotnicilj = document.getElementById("zivotnicilj").value;
        const zanr = document.getElementById("zanr").value;
        const pice = document.getElementById("pice").value;
        const hobi = document.getElementById("hobi").value;
        const pesma = document.getElementById("pesma").value;
        const zauzet = 0;
        const par = 0;

        // Proveri da li su podaci uneti
        if (!ime || !prezime || !pol || !zeljenipol || !tiplicnosti || !roleModel || !zivotnicilj || !zanr || !pice || !hobi || !pesma) {
            alert("Molim Vas da popunite sva polja");
            return;
        }
    
        // Pripremi podatke za slanje
        const formData = {
            ime: ime,
            prezime: prezime,
            pol: pol,
            zeljenipol: zeljenipol,
            tiplicnosti: tiplicnosti,
            roleModel: roleModel,
            zivotnicilj: zivotnicilj,
            zanr: zanr,
            pice: pice,
            hobi: hobi,
            pesma: pesma,
            zauzet: zauzet,
            par: par
        };
    
        // Pošaljite podatke serveru (putem fetch-a)
        fetch("https://nlnl25-3.onrender.com/save_to_csv", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then(data => {
            // Spremi broj korisnika u localStorage
            localStorage.setItem("userNumber", data.broj); // Čuva broj korisnika u localStorage
            window.location.href = "/form2"; // Preusmeravanje na form2.html
        })
        .catch(error => {
            console.error("Greška:", error);
        });
    });
</script>
</body>
</html>
