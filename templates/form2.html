<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NO LOVE NO LIFE - Form 2</title>

    <link href="static/style.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header> 
        <h1>NO LOVE NO LIFE</h1>
    </header>

    <main class="main1">
        <div class="b">
            <h2>Popuni formu i pronadji svoju srodnu dusu!</h2>
            <h3>XOXOXOXO</h3>
        </div>
        
        <h5>Vaš broj je: <span id="userNumber"></span></h5>
    </main>

    <footer>
        <p class="a"> Napravljeno s ljubavlju za NLNL &#169; 2025 </p>
    </footer>

   <script>
    window.onload = function() {
        // Proveravamo da li je već sačuvan korisnički ID u localStorage
        let userNumber = localStorage.getItem('userNumber');
        
        // Ako korisnički ID nije u localStorage, pozivamo server da ga dobavimo
        if (!userNumber) {
            fetch('/get_user_id')
                .then(response => response.json())
                .then(data => {
                    if (data.userId) {
                        // Spremamo userId u localStorage kako bi se sačuvao
                        localStorage.setItem('userNumber', data.userId);
                        userNumber = data.userId;  // Dodeljujemo userId iz odgovora
                    } else {
                        userNumber = "N/A";  // Ako nije pronađen korisnik
                    }

                    // Prikazujemo korisnički ID na stranici
                    document.getElementById('userNumber').textContent = userNumber;
                })
                .catch(error => {
                    console.error('Greška prilikom učitavanja korisničkog ID-a:', error);
                    document.getElementById('userNumber').textContent = "Greška prilikom učitavanja ID-a";
                });
        } else {
            // Ako korisnički ID postoji u localStorage, odmah ga prikazujemo
            document.getElementById('userNumber').textContent = userNumber;
        }
    }
</script>
</body>
</html>
