<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NO LOVE NO LIFE - Form 2</title>

    <link href="static/style.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header> 
        <h1>NO LOVE NO LIFE</h1>
    </header>

    <main class="main1">
        <div class="b">
            <h2>Popuni formu i pronadji svoju srodnu dusu!</h2>
            <h3>XOXOXOXO</h3>
        </div>
        
        <h5>Vaš broj je: <span id="userNumber"></span></h5>
    </main>

    <footer>
        <p class="a"> Napravljeno s ljubavlju za NLNL &#169; 2025 </p>
    </footer>

   <script>
    // Kada se stranica učita
    window.onload = function() {
        // Prvo pokušaj da preuzmeš korisnički ID iz localStorage
        let userNumber = localStorage.getItem('userNumber');

        // Ako korisnički ID nije pronađen u localStorage, pozovi backend da bi dobio ID
        if (!userNumber) {
            fetch('/get_user_id')  // Pozivanje rute koja vraća ID korisnika
                .then(response => response.json())  // Dobijanje JSON odgovora
                .then(data => {
                    if (data.userId !== null) {
                        // Ako je korisnički ID pronađen, sačuvaj ga u localStorage
                        localStorage.setItem('userNumber', data.userId);
                        userNumber = data.userId;  // Prikazivanje korisničkog ID-a na stranici
                    } else {
                        // Ako nije pronađen korisnik
                        userNumber = "N/A";
                    }

                    // Prikazivanje korisničkog ID-a na stranici
                    document.getElementById('userNumber').textContent = userNumber;
                })
                .catch(error => {
                    console.error("Greška pri preuzimanju korisničkog ID-a:", error);
                    document.getElementById('userNumber').textContent = "Greška pri učitavanju";
                });
        } else {
            // Ako je korisnički ID već u localStorage, prikaži ga odmah
            document.getElementById('userNumber').textContent = userNumber;
        }
    }
</script>

</body>
</html>
